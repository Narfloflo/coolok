{% extends 'base.html.twig' %}

{% block title %}{{ parent() }} - Trouver une colocation, un colocataire facilement et gratuitement{% endblock %}
{% block stylesheets %}<link rel="stylesheet" href="{{ asset('css/main/card.css') }}">{% endblock %}

{% block body %}
{# 
{{ form_start(searchFlat) }}

{{form_row(searchFlat.query)}}
{{form_row(searchFlat.submit)}}

{{ form_end(searchFlat) }} #}

<div>
    <h1>Votre recherche</h1>

    {# {{ form_start(searchForm) }}
    <div class="form-row">
        {{ form_row(searchForm.query) }}
    </div>
    <div class="form-row">
        {{ form_row(searchForm.type) }}
    </div>
    <div class="form-row">
        {{ form_row(searchForm.furnished) }}
    </div>
    <div class="form-row">
        {{ form_row(searchForm.gender) }}
    </div>
    <div class="form-row">
        {{ form_row(searchForm.submit) }}
    </div>
    {{ form_end(searchForm) }} #}

    
    <form action="{{ url('search') }}" method="get" class="d-flex">

        <label for="search" hidden>Saisir votre recherche</label>
        <input type="search" id="search" name="query" class="form-search" placeholder="Saisir votre recherche" aria-label="Saisir votre recherche">
    
        <button type="submit" class="btn-search" aria-label="Rechercher">Rechercher</button>
        
    </form>
    <form action="{{ url('search') }}" method="get">
        <input type="checkbox" id="furnished" name="searchAdv" value="furnished">
        <label for="furnished">Meublé</label>
    
        <input type="checkbox" id="space" name="searchAdv" value="space">
        <label for="space">Place disponible</label>
    
        <input type="checkbox" id="surface" name="searchAdv" value="surface">
        <label for="space">Surface</label>
    
        <input type="checkbox" id="rent" name="searchAdv" value="rent">
        <label for="rent">Loyer</label>
    
        <input type="checkbox" id="gender" name="searchAdv" value="gender">
        <label for="gender">Préférence genre</label>
    </form>
</div>


{# coolok.com/search.php?q=lille  #}


<div class="row row-cols-2 row-cols-lg-4 g-4">
    {% for flat in flats %}
    <div class="col">
        <a href="{{ path('flat_show', {id: flat.id}) }}" class="link-card">
            <div class="card h-100">
                <div class="card-flat-top">
                    <span class="freeplace">{{ flat.freespace }} {{ (flat.freespace < 2) ? 'place' : 'places' }}</span>
                    <strong class="rent">{{ flat.rent |format_currency('EUR', {fraction_digit: 0}) }}</strong>
                    <img src="{{ flat.images[0] }}"  alt="Colocation {{ flat.type }} {{ flat.city }} {{ flat.surface }} m2">
                </div>
            <div class="card-flat-info">
                <div>
                    <h3 class="card-flat-title">{{ flat.type }}</h3>
                    <span class="card-flat-subtitle">{{ flat.city|u.truncate(20, '...') }}</span>
                </div>
                <div>
                    <span class="flat-surface">{{ flat.surface }} m2</span>
                    <span class="flat-place">{{ flat.totalspace }} pers</span>
                    <span class="flat-furnished">{{ flat.furnished }}</span>
                    <span class="flat-gender">{{ flat.gender }}</span>
                    <span class="flat-freeSpace">{{ flat.freeSpace }}</span>
                </div>
            </div>
            <!-- <button class="btn-see-more"><span class="see-more">Découvrir </span></button> -->
            </div>
        </a>
    </div>
{% endfor %}
</div>


{% endblock %}